<h1>Recent Posts</h1>

<% @posts.each do |post| %>
  <div class="post-card">
    <h2>
      <%= link_to post.title, post %>
    </h2>

  <% if post.image.attached? %>
    <div class="post-card-image">
      <%= link_to post do %>
        <%= image_tag post_preview_image(post), 
                      alt: post.title, 
                      class: "compressed-thumb", 
                      style: "width: 300px; height: 300px; object-fit: cover;" %>
      <% end %>
    </div>
  <% end %>

    <p class="meta">
      by <%= post.user.email %> Â·
      <%= time_ago_in_words(post.created_at) %> ago
    </p>

    <p>
      <%= truncate(post.content, length: 150) %>
    </p>
  </div>
<% end %>

<% if user_signed_in? %>
  <%= link_to "New Post", new_post_path, class: "button" %>
<% end %>
